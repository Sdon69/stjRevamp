<head>
<script src="deviceCheck.js"></script>
<script src="youtubeUpload.js"></script>
<link rel="stylesheet" type="text/css" href="youtubeUploader.css">

<style>

::placeholder {
    color: #4489c8;
    opacity: 1; /* Firefox */
}

* { box-sizing:border-box; }

/* basic stylings ------------------------------------------ */
body 				 { background:url(https://scotch.io/wp-content/uploads/2014/07/61.jpg); }

h2 		 {
  text-align:center;
  margin-bottom:50px;
}
h2 small {
  font-weight:normal;
  color:#888;
  display:block;
}
.footer 	{ text-align:center; }
.footer a  { color:#53B2C8; }

/* form starting stylings ------------------------------- */
.group 			  {
  position:relative;
  margin-bottom:45px;
}
input 				{
  font-size:18px;
  padding:10px 10px 10px 5px;
  width:100%;
  border:none;
  border-bottom:1px solid #757575;

  font-weight:450;
  color:#4489c8;

}
input:focus 		{ outline:none; }

/* LABEL ======================================= */
label 				 {
  color:#999;
  font-size:18px;
  font-weight:normal;
  position:absolute;
  pointer-events:none;
  left:5px;
  top:10px;
  transition:0.2s ease all;
  -moz-transition:0.2s ease all;
  -webkit-transition:0.2s ease all;
}

/* active state */
input:focus ~ label, input:valid ~ label 		{
  top:-20px;
  font-size:14px;
  color:#3f8acd;
}

/* BOTTOM BARS ================================= */
.bar 	{ position:relative; display:block; width:100%; }
.bar:before, .bar:after 	{
  content:'';
  height:2px;
  width:0;
  bottom:1px;
  position:absolute;
  background:#3f8acd;
  transition:0.2s ease all;
  -moz-transition:0.2s ease all;
  -webkit-transition:0.2s ease all;
}
.bar:before {
  left:50%;
}
.bar:after {
  right:50%;
}

/* active state */
input:focus ~ .bar:before, input:focus ~ .bar:after {
  width:50%;
}

/* HIGHLIGHTER ================================== */
.highlight {
  position:absolute;
  height:60%;
  width:100%;
  top:25%;
  left:0;
  pointer-events:none;
  opacity:0.5;
}

/* active state */
input:focus ~ .highlight {
  -webkit-animation:inputHighlighter 0.3s ease;
  -moz-animation:inputHighlighter 0.3s ease;
  animation:inputHighlighter 0.3s ease;
}

/* ANIMATIONS ================ */
@-webkit-keyframes inputHighlighter {
	from { background:#3f8acd; }
  to 	{ width:0; background:transparent; }
}
@-moz-keyframes inputHighlighter {
	from { background:#3f8acd; }
  to 	{ width:0; background:transparent; }
}
@keyframes inputHighlighter {
	from { background:#3f8acd; }
  to 	{ width:0; background:transparent; }
}

textarea 				{
  font-size:18px;
  padding:10px 10px 10px 5px;
  width:100%;
  border:none;
  border-bottom:1px solid #757575;
}
textarea:focus 		{ outline:none; }

/* LABEL ======================================= */
label 				 {
  color:#999;
  font-size:18px;
  font-weight:normal;
  position:absolute;
  pointer-events:none;
  left:5px;
  top:10px;
  transition:0.2s ease all;
  -moz-transition:0.2s ease all;
  -webkit-transition:0.2s ease all;
}

/* active state */
textarea:focus ~ label, textarea:valid ~ label 		{
  top:-20px;
  font-size:14px;
  color:#3f8acd;
}

/* BOTTOM BARS ================================= */
.tbar 	{ position:relative; display:block; width:100%; }
.tbar:before, .tbar:after 	{
  content:'';
  height:5px;
  width:0;
  bottom:1px;
  position:absolute;
  background:#3f8acd;
  transition:0.2s ease all;
  -moz-transition:0.2s ease all;
  -webkit-transition:0.2s ease all;
}
.tbar:before {
  left:50%;
}
.tbar:after {
  right:50%;
}

/* active state */
textarea:focus ~ .tbar:before, textarea:focus ~ .tbar:after {
  width:50%;
}

/* HIGHLIGHTER ================================== */
.highlight {
  position:absolute;
  height:100%;


  left:0;
  pointer-events:none;
  opacity:0.5;
}

/* active state */
textarea:focus ~ .highlight {
  -webkit-animation:textareaHighlighter 0.3s ease;
  -moz-animation:textareaHighlighter 0.3s ease;
  animation:textareaHighlighter 0.3s ease;
}

/* ANIMATIONS ================ */
@-webkit-keyframes textareaHighlighter {
	from { background:#3f8acd; }
  to 	{ width:0; background:transparent; }
}
@-moz-keyframes textareaHighlighter {
	from { background:#3f8acd; }
  to 	{ width:0; background:transparent; }
}
@keyframes textareaHighlighter {
	from { background:#3f8acd; }
  to 	{ width:0; background:transparent; }
}


html, body {height:100%; overflow:hidden}
body {
overflow:auto; -webkit-overflow-scrolling:touch;margin:0;
padding:20px;
}

</style>
</head>

<button id="authorize-button" style="display: none;">Authorize</button>
<button id="signout-button" style="display: none;">Sign Out</button>
<span id="signinButton" class="pre-sign-in">
  <!-- IMPORTANT: Replace the value of the <code>data-clientid</code>
       attribute in the following tag with your project's client ID. -->

  <span
    class="g-signin"
    data-callback="signinCallback"
    data-clientid="494373301552-ud7mvkhosmjkbbv4th3qelqij6jatfkg.apps.googleusercontent.com"
    data-cookiepolicy="single_host_origin"
    data-scope="https://www.googleapis.com/auth/youtube.upload https://www.googleapis.com/auth/youtube">

  </span>
</span>

<div class="post-sign-in">

  <div>
    <!-- <img id="channel-thumbnail">
    <span id="channel-name"></span> -->
  </div>

    <form name='event'>
                <div class="group">
    <input id="title" type="text" placeholder="Title" style="width:100%;" required>
    <span class="highlight"></span>
    <span class="bar"></span>

  </div>

                <div class="group">
    <textarea id="description" placeholder="Description" style="width:100%;" required></textarea>
    <span class="highlight"></span>
    <span class="bar"></span>
  </div>
  <br> <font color="#3f8acd">
  <b>
  Department(s) Concerned:<br><br>
    <input type="checkbox" style= "width:auto; visibility:visible;" id="checkAllDepartments" onclick="checkAllD()"><span id="checkAllDepartmentsSpan" >Select All Departments<br><br></span>
          <input type="checkbox" style= "width:auto; display:none;" id="uncheckAllDepartments" onclick="uncheckAllD()"><span id="uncheckAllDepartmentsSpan"></span>
  <input type="checkbox"  name="department0" value="Art"  style="width:auto; " id="mySelect">Art<br><br>
  <input type="checkbox" name="department1" value="Commerce"  style="width:auto;" id="mySelect">Commerce<br><br>
  <input type="checkbox" name="department2" value="Management" style="width:auto;" id="mySelect">Management<br><br>
  <input type="checkbox" name="department3" value="Education" style="width:auto;" id="mySelect">Education<br><br>
  <input type="checkbox" name="department4" value="Science" style="width:auto;" id="mySelect">Science<br><br>
  <input type="checkbox" name="department5" value="Other" style="width:auto;" id="mySelect">Other<br><br>

  <br>


  Semesters(s) Concerned:<br><br>
  <input type="checkbox" style= "width:auto; visibility:visible;" id="checkAllSemesters" onclick="checkAllS()" ><span id="checkAllSemestersSpan">Select All Semesters<br><br></span>
    <input type="checkbox" style= "width:auto; display:none;" id="uncheckAllSemesters" onclick="uncheckAllS()" ><span id="uncheckAllSemestersSpan"></span>
  <input type="checkbox" name="semester0" value="First Semester" style="width:auto;" id="mySelect">First Semester<br><br>
  <input type="checkbox" name="semester1" value="Second Semester" style="width:auto;"style="width:auto;"  id="mySelect">Second Semester<br><br>
  <input type="checkbox" name="semester2" value="Third Semester"  style="width:auto;" id="mySelect">Third Semester<br><br>
  <input type="checkbox" name="semester3" value="Fourth Semester" style="width:auto;" id="mySelect">Fourth Semester<br><br>
  <input type="checkbox" name="semester4" value="Fifth Semester" style="width:auto;" id="mySelect">Fifth Semester<br><br>
  <input type="checkbox" name="semester5" value="Sixth and Above Semesters" style="width:auto;" id="mySelect">Sixth and Above Semesters<br><br>
</b>
</font>
</form>
    <!-- <label for="privacy-status">Privacy Status:</label> -->
    <select id="privacy-status" style="display:none;">

      <option>unlisted</option>

    </select>


  <div>
    <input  type="file" id="file" class="button"  accept="video/*" style="width:100%; margin-bottom:5%;border-bottom:none;" >
        <button onclick="onClickUpload()" style="width:100%;background: linear-gradient(0deg, #15446e, #408bce); color:#FFFFFF;border:none;padding:2%;font-weight:550;">Upload And Submit</button>
    <button id="button" style="width:100%;display:none">Upload And Submit</button>
  <div class="during-upload">
    <p><span id="percent-transferred"></span>% done (<span id="bytes-transferred"></span>/<span id="total-bytes"></span> bytes)</p>
    <progress id="upload-progress" max="1" value="0"></progress>
  </div>

  <div class="post-upload">
    <!-- <p>Uploaded video with id <span id="video-id"></span>. Polling for status...</p> -->
    <ul id="post-upload-status"></ul>
    <div id="player"></div>
  </div>
  <!-- <p id="disclaimer">By uploading a video, you certify that you own all rights to the content or that you are authorized by the owner to make the content publicly available on YouTube, and that it otherwise complies with the YouTube Terms of Service located at <a href="http://www.youtube.com/t/terms" target="_blank">http://www.youtube.com/t/terms</a></p> -->
</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="//apis.google.com/js/client:plusone.js"></script>

<script type="text/javascript">
function checkAllD()
{
  checkAllDepartments();
}

function checkAllS()
{
  checkAllSemesters();
}

function uncheckAllD()
{
  uncheckAllDepartments();
}

function uncheckAllS()
{
  uncheckAllSemesters();
}
var isAnyFileSelected = false;
var isSemesterChecked;
var isDepartmentChecked;
var cataegoryString = 'All Departments All Semesters';
function onClickUpload()
{





  var title = document.getElementById("title").value;

  var desc = document.getElementById("description").value;


  //
    // var pass_check = document.event.pass_check.value;
  var loadedPassword = localStorage.getItem("password");

    var today = new Date();
    var dd = today.getDate();
    var mm = today.getMonth()+1; //January is 0!

    var yyyy = today.getFullYear();
    if(dd<10){
    dd='0'+dd;
    }
    if(mm<10){
    mm='0'+mm;
    }
    var today = dd+'/'+mm+'/'+yyyy;




  concatCataegoryString();









  if(title.length < 1)
  {


    alert('Enter the Title.');
  }
  else if (desc.length < 1) {
      alert('Enter the Description.');
  }
  // else if (pass_check.length < 1) {
  //     alert('Confirm the password.');
  // }else if(pass_check != loadedPassword)
  // {
  //   alert("Incorrect Password")
  // }






  else if (!isDepartmentChecked) {
    alert('Choose Atleast one Department')
  }

  else if (!isSemesterChecked) {
    alert('Choose Atleast one Semester');

  }else if(!isAnyFileSelected)
  {
      alert('Please Choose a File');
  }
  else{



        localStorage.setItem("loadedCataegory", cataegoryString);


              document.getElementById('button').click();


  }








}
function concatCataegoryString()
{

             var semester = ['1'];
             semester.pop('1');

  if(document.event.semester0.checked)
  {
     semester.push(document.event.semester0.value);
  isSemesterChecked = true;
  }
  if(document.event.semester1.checked)
  {
     semester.push(document.event.semester1.value);
  isSemesterChecked = true;
  }
  if(document.event.semester2.checked)
  {
    semester.push(document.event.semester2.value);
  isSemesterChecked = true;
  }
  if(document.event.semester3.checked)
  {
    semester.push(document.event.semester3.value);
  isSemesterChecked = true;
  }
  if(document.event.semester4.checked)
  {
    semester.push(document.event.semester4.value);
  isSemesterChecked = true;
  }
  if(document.event.semester5.checked)
  {
    semester.push(document.event.semester5.value);
  isSemesterChecked = true;
  }




  var semesterString = 'All Semesters'.concat(semester);

  var department = ['1'];
  department.pop('1');



  if(document.event.department0.checked)
  {
      department.push(document.event.department0.value);
isDepartmentChecked = true;
  }
  if(document.event.department1.checked)
  {
      department.push(document.event.department1.value);
isDepartmentChecked = true;
  }
  if(document.event.department2.checked)
  {
      department.push(document.event.department2.value);
isDepartmentChecked = true;
  }
  if(document.event.department3.checked)
  {
      department.push(document.event.department3.value);
isDepartmentChecked = true;
  }
  if(document.event.department4.checked)
  {
      department.push(document.event.department4.value);
isDepartmentChecked = true;
  }
  if(document.event.department5.checked)
  {
      department.push(document.event.department5.value);
isDepartmentChecked = true;
  }






    if(!department)
    {
      // alert('Choose Atleast one Department');
    }
    else if(1<department.length){
    for(i=0;i<=department.length - 1;i++)
    {
      cataegoryString = cataegoryString.concat(department[i]);
    }
    }else {
      cataegoryString = cataegoryString.concat(department);
    }

  if(!semester)
  {
    // alert('Choose Atleast one Semester');
  }
  else if(1<semester.length){
  for(i=0;i<=semester.length - 1;i++)
  {
    cataegoryString = cataegoryString.concat(semester[i]);
  }
  }else {
    cataegoryString = cataegoryString.concat(semester);
  }





}

function checkAllSemesters()
{
  document.event.semester0.checked = true;
  document.event.semester1.checked = true;
  document.event.semester2.checked = true;
  document.event.semester3.checked = true;
  document.event.semester4.checked = true;
  document.event.semester5.checked = true;

  document.getElementById("uncheckAllSemesters").checked = false;
    document.getElementById("checkAllSemesters").style ="display:none";
      document.getElementById("checkAllSemestersSpan").style = "display:none";
      document.getElementById("uncheckAllSemesters").style ="visibility:visible;width:auto";
      document.getElementById("uncheckAllSemestersSpan").innerHTML = "Deselect All Semesters<br><br>";
    document.getElementById("uncheckAllSemestersSpan").style ="visibility:visible;width:auto";

}

function checkAllDepartments()
{
  document.event.department0.checked = true;
  document.event.department1.checked = true;
  document.event.department2.checked = true;
  document.event.department3.checked = true;
  document.event.department4.checked = true;
  document.event.department5.checked = true;
document.getElementById("uncheckAllDepartments").checked = false;
  document.getElementById("checkAllDepartments").style ="display:none";
    document.getElementById("checkAllDepartmentsSpan").style = "display:none";
    document.getElementById("uncheckAllDepartments").style ="visibility:visible;width:auto";
    document.getElementById("uncheckAllDepartmentsSpan").innerHTML = "Deselect All Departments<br><br>";
  document.getElementById("uncheckAllDepartmentsSpan").style ="visibility:visible;width:auto";

}


function uncheckAllSemesters()
{
  document.event.semester0.checked = false;
  document.event.semester1.checked = false;
  document.event.semester2.checked = false;
  document.event.semester3.checked = false;
  document.event.semester4.checked = false;
  document.event.semester5.checked = false;

  document.getElementById("checkAllSemesters").checked = false;
  document.getElementById("checkAllSemesters").style = "visibility:visible;width:auto";
    document.getElementById("checkAllSemestersSpan").innerHTML = "Select All Semesters<br><br>";
      document.getElementById("checkAllSemestersSpan").style ="visibility:visible;width:auto";
    document.getElementById("uncheckAllSemesters").style  ="display:none";
document.getElementById("uncheckAllSemestersSpan").style ="display:none";

}

function uncheckAllDepartments()
{
  document.event.department0.checked = false;
  document.event.department1.checked = false;
  document.event.department2.checked = false;
  document.event.department3.checked = false;
  document.event.department4.checked = false;
  document.event.department5.checked = false;
  document.getElementById("checkAllDepartments").checked = false;
  document.getElementById("checkAllDepartments").style = "visibility:visible;width:auto";
    document.getElementById("checkAllDepartmentsSpan").innerHTML = "Select All Departments<br><br>";
      document.getElementById("checkAllDepartmentsSpan").style ="visibility:visible;width:auto";
    document.getElementById("uncheckAllDepartments").style  ="display:none";
document.getElementById("uncheckAllDepartmentsSpan").style ="display:none";

}


var timestamp;


  // Client ID and API key from the Developer Console
  var CLIENT_ID = '494373301552-ud7mvkhosmjkbbv4th3qelqij6jatfkg.apps.googleusercontent.com';
  var API_KEY = 'AIzaSyAPAiPku7AqUy6mzyI-QVGe1cobzv8Afmw';

  // Array of API discovery doc URLs for APIs used by the quickstart
  var DISCOVERY_DOCS = ["https://sheets.googleapis.com/$discovery/rest?version=v4"];

  // Authorization scopes required by the API; multiple scopes can be
  // included, separated by spaces.
  var SCOPES = "https://www.googleapis.com/auth/spreadsheets";

  var authorizeButton = document.getElementById('authorize-button');
  var signoutButton = document.getElementById('signout-button');

  /**
   *  On load, called to load the auth2 library and API client library.
   */
  function handleClientLoad() {
    gapi.load('client:auth2', initClient);
  }

  /**
   *  Initializes the API client library and sets up sign-in state
   *  listeners.
   */
  function initClient() {
    gapi.client.init({
      apiKey: API_KEY,
      clientId: CLIENT_ID,
      discoveryDocs: DISCOVERY_DOCS,
      scope: SCOPES
    }).then(function () {
      // Listen for sign-in state changes.
      gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);

      // Handle the initial sign-in state.
      updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
      authorizeButton.onclick = handleAuthClick;
      signoutButton.onclick = handleSignoutClick;
    });
  }

  /**
   *  Called when the signed in status changes, to update the UI
   *  appropriately. After a sign-in, the API is called.
   */
  function updateSigninStatus(isSignedIn) {
    if (isSignedIn) {
      authorizeButton.style.display = 'none';
      signoutButton.style.display = 'none';
      // listMajors();

    } else {
      authorizeButton.style.display = 'none';
      signoutButton.style.display = 'none';
      alert('not signed in');
      var delayInMilliseconds = 10; //0.01 second

      setTimeout(function() {

      document.getElementById('authorize-button').click();
      }, delayInMilliseconds);


    }
  }

  /**
   *  Sign in the user upon button click.
   */
  function handleAuthClick(event) {
    gapi.auth2.getAuthInstance().signIn();
  }

  /**
   *  Sign out the user upon button click.
   */
  function handleSignoutClick(event) {
    gapi.auth2.getAuthInstance().signOut();
  }

  /**
   * Append a pre element to the body containing the given message
   * as its text node. Used to display the results of the API call.
   *
   * @param {string} message Text to be placed in pre element.
   */
  function appendPre(message) {
    var pre = document.getElementById('content');
    var textContent = document.createTextNode(message + '\n');
    pre.appendChild(textContent);
  }

  /**
   * Print the names and majors of students in a sample spreadsheet:
   * https://docs.google.com/spreadsheets/d/1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms/edit
   */


  function listMajors() {
      // document.getElementById("loadingDiv").style = "position:fixed; height:100%; width:100%; background:#80141516; display:block;" ;

    var loadedFirstName = localStorage.getItem("firstName");
    var loadedLastName = localStorage.getItem("lastname");
    var loadedFullName = loadedFirstName.concat(' ' + loadedLastName);
    var loadedUserId = localStorage.getItem("userId");
    var loadedCataegory = localStorage.getItem("loadedCataegory")
    var loadedPublishDate = localStorage.getItem("loadedPublishDate")
    var loadedTitle =  document.getElementById("title").value;
    var loadedDescription = document.getElementById("description").value;
    var loadedUrl =  localStorage.getItem("loadedUrl");
    if(!loadedUrl)
    {
      loadedUrl = 'None'
    }

    localStorage.removeItem('loadedUrl');
      localStorage.removeItem('status');
    var a = 2;
    gapi.client.sheets.spreadsheets.values.get({
      spreadsheetId: getNoteSheetId(),
      range: 'Stj Teacher Notes!A2:I',
       }).then(function(response) {
         var range = response.result;
         if (range.values.length > 0) {
           for (i = 0; i < range.values.length; i++) {
             var row = range.values[i];
             // Print columns A and E, which correspond to indices 0 and 4.

                           var Str1 = row[0];

                           if (Str1.includes("BonBlank88"))
                           {
                             break;
                           }


                           rangeImported =  "Stj Teacher Notes!".concat("A" + ++a + ":I");
           }


      updateInfo(loadedTitle,loadedDescription,loadedCataegory,loadedUserId,loadedFullName,a,loadedPublishDate,loadedUrl,rangeImported);


         } else {
           alert('No data found.');
         }
       }, function(response) {
         alert('Error: ' + response.result.error.message);
       });


}
function updateInfo(loadedTitle,loadedDescription,loadedCataegory,loadedUserId,loadedFullName,a,loadedPublishDate,loadedUrl,rangeImported)
{

  timestamp = Math.round(new Date().getTime()/1000);
     gapi.client.sheets.spreadsheets.values.update({
       spreadsheetId: getNoteSheetId(),
       range: rangeImported,
       valueInputOption: "USER_ENTERED",
       resource:  {
                      values: [ [loadedTitle,loadedDescription,loadedCataegory,loadedUserId,loadedFullName,a,loadedPublishDate,loadedUrl,timestamp]]
                }
     }).then(function(response) {
       updateTimestamp();

       var range = response.result;
       if (range.values.length > 0) {


       } else {
         document.write('No data found.');
       }
     }, function(response) {
       document.write('Error: ' + response.result.error.message);
     });



}


function updateTimestamp()
{
     gapi.client.sheets.spreadsheets.values.update({
       spreadsheetId: getMiscSheetId(),
       range:   "Timestamp!".concat("B3:B"),
       valueInputOption: "USER_ENTERED",
       resource:  {
                      values: [ [timestamp]]
                }
     }).then(function(response) {
         // document.getElementById("loadingDiv").style = "display:none;";
         localStorage.setItem("writeMode", "notes");
               localStorage.setItem("homePage","notesViewer.html");

       window.top.location.reload();
       var range = response.result;
       if (range.values.length > 0) {


       } else {
         document.write('No data found.');
       }
     }, function(response) {
       document.write('Error: ' + response.result.error.message);
     });



}

$("#file").change(function(){
isAnyFileSelected = true;

 });


</script>

  <script async defer src="https://apis.google.com/js/api.js"
    onload="this.onload=function(){};handleClientLoad()"
    onreadystatechange="if (this.readyState === 'complete') this.onload()">
  </script>
