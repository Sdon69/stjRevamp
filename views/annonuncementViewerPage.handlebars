<!--
  Copyright 2016 Google, Inc.

  Licensed to the Apache Software Foundation (ASF) under one or more contributor
  license agreements. See the NOTICE file distributed with this work for
  additional information regarding copyright ownership. The ASF licenses this
  file to you under the Apache License, Version 2.0 (the "License"); you may not
  use this file except in compliance with the License. You may obtain a copy of
  the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  License for the specific language governing permissions and limitations under
  the License.
-->










      <style>





    *{padding:0;margin:0;}




    .my-float{
        margin-top:22px;
    }
    </style>







        <style>




        .float{
        	position:fixed;
        	width:60px;
        	height:60px;
        	bottom:40px;
        	right:40px;
        	background-color:#3f8acd;
        	border-radius:50px;
        	text-align:center;
        	box-shadow: 2px 2px 3px #999;

        }

        .my-float{
        	margin-top:22px;
        }
        </style>
        <div class="mdl-grid" style="padding:0;margin:0;background-color:#3f8acd;" >


          <!-- Show spreadsheets -->
          <section id="spreadsheets2"
                   class="mdl-cell mdl-cell--4-col relative" style="padding:0;margin:0;background-color:#3f8acd;">
            <div class="mdl-list" style="padding:0;margin:0;background-color:#3f8acd; " >
              <div class="mdl-list__item" style="padding:0;margin:0;background-color:#3f8acd;"><div style="width:100%; background-color:#3f8acd; ">
        <a href="/annonuncementWriterPage">
        <img src="bluePlus.jpg" class="float"></a>
        <div style="width:100%; background-color:#3f8acd; padding:2%; padding-bottom:4%;">
        <form>
        <table width="100%"><tr><td width="48%">
            <select name ="s1" onchange="myFunction()" id="cataegory1" style="background:#3f8acd; border:none; color:#ECE7E7; width:100%; margin-bottom:5%;">
                <option style="font-weight:bold;">Choose  Department</option>
              <option style="font-weight:bold;">All Departments</option>
        <option style="font-weight:bold;">Art</option>
        <option style="font-weight:bold;">Commerce</option>
        <option style="font-weight:bold;">Management</option>
        <option style="font-weight:bold;">Education</option>
        <option style="font-weight:bold;">Science</option>
        <option style="font-weight:bold;">Other</option>
              </select></td>

            <td width="52%" rowspan="2" >
            <input id='hangoutButtonId'    type="button" value="button" name="s3"  style="visibility: collapse;" onclick="submitClick()" >
            <input type="button" value="FILTER"  onClick="checkInfo()" style="padding:5%; padding-right:20%; padding-left:20%; background-color:rgba(236,230,230,0.65); border:none; color:rgba(255,255,255,1.00); font-size:12px; box-shadow:rgba(0,0,0,1.00); font-weight:600;  "  ></td></tr>
             <tr> <td>
            <select name ="s2" onchange="myFunction()" id="cataegory2"  style="background:#3f8acd; border:none; color:#ECE7E7; width:100%;">
                    <option style="font-weight:bold;">Choose Semester</option>
                <option style="font-weight:bold;">All Semesters</option>
  <option style="font-weight:bold;">First Semester</option>
  <option style="font-weight:bold;">Second Semester</option>
  <option style="font-weight:bold;">Third Semester</option>
  <option style="font-weight:bold;">Fourth Semester</option>
  <option style="font-weight:bold;">Fifth Semester</option>
  <option style="font-weight:bold;">Sixth and Above Semesters</option>
                </select></td></tr></table>
        </form>
        </div>


        <span class="mdl-list__item-secondary-action">

          <button class="mdl-button mdl-js-button mdl-button--raised
                         mdl-js-ripple-effect mdl-button--colored"
                  rel="createAnnouncements"  type="button" id='create'  style="visibility: collapse; z-index:-88888888; position:fixed">Create</button>


                  </button>
                          </span>
                          <!-- <iframe src= "/eventViewerFrame" style="position:fixed; top:20%; left:0px; bottom:0px; right:0px; width:100%; height:100%; border:none; margin:0; padding:0; overflow:hidden; z-index:-1;">
                            Your browser doesn't support iframes
                        </iframe> -->
                        </div>
                        {{#each spreadsheets}}
                        <div class="mdl-list__item">


                        </div>
                        {{/each}}
                      </div>
                    </section>
                  </div>
                  <div id="myDiv" style="height:100%,width:100%;">        </div>


<script>




  var delayInMilliseconds = 2000; //1 second

  setTimeout(function() {

    document.getElementById('create').click();
  }, delayInMilliseconds);

</script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/json2html/1.0.0/json2html.min.js"></script>
  <script>
var gCataegory1;
var gCataegory2;




function loadData() // Not used till Now
{

  var sSemester   = localStorage.getItem("semester");
  gCataegory1 = sSemester;
  var sDepartment = localStorage.getItem("department");
  gCataegory2 = sDepartment;
}

  function checkInfo()
  {
    var skillsSelect = document.getElementById("cataegory1");
    var cataegory1 = skillsSelect.options[skillsSelect.selectedIndex].text;
    gCataegory1 = cataegory1;
    var skillsSelect2 = document.getElementById("cataegory2");
    var cataegory2 = skillsSelect2.options[skillsSelect2.selectedIndex].text;
    gCataegory2 = cataegory2;

    if(cataegory1.includes('Choose'))
    {
      alert('Choose a Department');
  }else if (cataegory2.includes('Choose')) {
      alert('Choose a Semester');
  }
  else {


    // document.getElementById('create').click();
    document.getElementById('hangoutButtonId').click();
  }

  }

var derivedUniqueIdNumber;
function submitClick()
{
var myValue = '{{isInformationAvailable}}';
var isTrueSet = (myValue == 'true');
  if(isTrueSet)
  {






  var departmentFilter = gCataegory1;
  var semesterFilter = gCataegory2;


var hello = '{{dataFromAnnouncement}}';
var res = hello.replace(/&quot;/g, '"');

var raw_data =  JSON.parse(res);



          var forLength = raw_data.length - 1;

      var i;
       var used = false;
       var anyNoteFromDept = false;

       var filteredData = [{
       name: 'str1',
       age:   'str2'
       }];
         for(i=0;i<=forLength;i++)
         {
         var dept = raw_data[i].cataegories;


           if(dept.includes(departmentFilter))
           {

             if(dept.includes(semesterFilter))
{

             if(!used)
             {
             filteredData.pop({
             name: 'str1',
             age:   'str2'
               });
               filteredData.push(raw_data[i]);
               used = true;
               anyNoteFromDept = true;

             }else{
               filteredData.push(raw_data[i]);
               anyNoteFromDept = true;
             }


}
           }
         }

         if(!anyNoteFromDept)
         {
           filteredData.pop({
           name: 'str1',
           age:   'str2'
             });
             filteredData.push({
             title: 'No Data for this filter Exists'
               });
         }
         var globalFilteredData = filteredData;




             var t = {'<>':"div style='width:100%;padding-top:20px;'",'html':[

                                     {'<>':"button id='1' name='1' value='${uniqueId}'  style='background:#fff;color:#3f8acd;width:100%; ",'html':[
                                       {'<>':"font face='Roboto'",'html':[
                                             {'<>':"div style='width:100%; padding-bottom:10px; margin-right:20px; padding-left:2%; background:#ffffff;'",'children':[
                                     {
                                       '<>':"div style='width:100%'",'children':[
                                         {
                                        '<>':"table style='width:100%'",'children':[
                                             {
                                                 '<>':"tr",'children':[
                                                   {
                                                   '<>':"td style='margin-bottom:3px; color:#3f8acd;font-size:14px; font-weight:600; padding-top:25px;text-align:left;'",'html':"${title}"
                                                   },
                                                   {
                                                     '<>':"td style='margin-right:25px;padding-top:6px;font-size:8px; font-weight:450; color:#848587; padding-right:15px;' align='right'",'html':"${datePublished}"
                                                   }
                                                 ]
                                             }
                                           ]
                                         }
                                       ]
                                     },{
                                         '<>':"div style='margin-left:6px;  margin-top:4px; margin-bottom:4px;  font-size:10px ; font-weight:600;'",'children':[
                                           {
                                             '<>':"table",'children':[
                                               {
                                                   '<>':"tr",'children':[
                                                     {
                                           '<>':"td style='align-content:flex-start; font-size:10px;font-weight:450;text-align: left; color:#000000;'",'html':"Author : ${fullName}"
                                                     }
                                                   ]
                                               }
                                             ]
                                           }
                                         ]
                                     },{
                                        '<>':"div style='font-size:12px; font-weight:450; padding-top:5px;text-align: left;color:#000000;'",'html':"${dottedString}"
                                     }
                                 ]}  ] }]}]};


  var d = filteredData;

  var transformedHtml =  json2html.transform(d,t) ;
  // document.write(transformedHtml);

  document.getElementById("myDiv").innerHTML=transformedHtml;




  $(function(){
      $("button").click(function() {
          var fired_button = $(this).val();
          derivedUniqueIdNumber = fired_button;




              for(i=0;i<=forLength;i++)
              {
              var uniqueId = raw_data[i].uniqueId;


                if(derivedUniqueIdNumber === uniqueId)
                {

                var sortedTitle = raw_data[i].title;

                var sortedDescription = raw_data[i].description;
                var sortedDateOfPublish = raw_data[i].datePublished;

                var sortedFullName = raw_data[i].fullName;

                localStorage.setItem("sortedTitle", sortedTitle);
                localStorage.setItem("sortedDescription", sortedDescription);
                localStorage.setItem("sortedDateOfPublish", sortedDateOfPublish);
                localStorage.setItem("sortedFullName", sortedFullName);

                 window.location.href = "/detailedAnnouncement";





                }

              }
      });
  });

}
}
</script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
